
int out(long value int port) {
    asm ("out 0, $" value);
}

int sleep_m();

int sleep_ms(long ms) {
    
    // 7692 is the millisecond constant
    long wait_until = 7692 * ms;
    long count = 0;

    if (count) wait_until = 0; 

    while (count < ms) {
        
        //if (ms == 0) out(0xBEEF 0);
        //if (count < 0) out(0x0A55 0);

        sleep_m();
        count = count + 1;
    }
}

int sleep_m() {
    
    // 7692 is the millisecond constant
    long wait_until = 3846;
    long count = 0;

    while (count < wait_until) {
        count = count + 1;
    }
}

int vga_write(int addr int value) {
    asm ("vgaw $, $, 0" addr value);
}

int main() {

    int i = 0;
    while (i < 10) {        
        //out (i 0);
        vga_write(i i + 0x30);
        sleep_ms(1000);
        i = i + 1;
    }
}